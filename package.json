{
  "name": "polls-app",
  "private": true,
  "packageManager": "pnpm@10.20.0",
  "engines": { "node": "20.x" },
  "scripts": {
    "db:start": "docker compose up -d db",
    "db:stop": "docker compose stop db",
    "db:psql": "docker exec -it polls-db psql -U polls -d polls",
    "db:logs": "docker compose logs -f db",
    "db:nuke": "docker compose down -v",
    "db:dump": "bash -lc 'docker exec -i polls-db pg_dump -U polls -d polls > ./.data/dump.sql'",
    "db:restore": "bash -lc 'cat ./.data/dump.sql | docker exec -i polls-db psql -U polls -d polls'",
    "db:test:start": "docker compose up -d db_test",
    "db:test:stop": "docker compose stop db_test",
    "db:test:psql": "docker exec -it polls-db-test psql -U polls -d polls_test",
    "db:test:logs": "docker compose logs -f db_test",
    "db:status": "docker compose ps",

    "prisma:gen": "pnpm --dir backend exec dotenv -e .env -- prisma generate --schema=prisma/schema.prisma",
    "prisma:migrate:init": "pnpm --dir backend exec dotenv -e .env -- prisma migrate dev --name init --schema=prisma/schema.prisma",
    "prisma:migrate": "pnpm --dir backend exec dotenv -e .env -- prisma migrate dev --schema=prisma/schema.prisma",
    "prisma:deploy": "pnpm --dir backend exec dotenv -e .env -- prisma migrate deploy --schema=prisma/schema.prisma",
    "prisma:reset": "pnpm --dir backend exec dotenv -e .env -- prisma migrate reset --force --schema=prisma/schema.prisma",
    "prisma:studio": "pnpm --dir backend exec dotenv -e .env -- prisma studio --schema=prisma/schema.prisma",
    "prisma:seed": "pnpm --dir backend exec dotenv -e .env -- prisma db seed",

    "be:dev": "pnpm --dir backend exec dotenv -e .env -- tsx src/server.ts",
    "fe:dev": "pnpm --dir frontend exec vite"
  }
}